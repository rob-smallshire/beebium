//
// DO NOT EDIT.
// swift-format-ignore-file
//
// Generated by the protocol buffer compiler.
// Source: keyboard.proto
//
import GRPC
import NIO
import NIOConcurrencyHelpers
import SwiftProtobuf


/// BBC keyboard matrix input service
///
/// Usage: instantiate `Beebium_KeyboardServiceClient`, then call methods of this protocol to make API calls.
internal protocol Beebium_KeyboardServiceClientProtocol: GRPCClient {
  var serviceName: String { get }
  var interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? { get }

  func keyDown(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<Beebium_KeyRequest, Beebium_KeyResponse>

  func keyUp(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<Beebium_KeyRequest, Beebium_KeyResponse>

  func typeText(
    _ request: Beebium_TypeTextRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<Beebium_TypeTextRequest, Beebium_TypeTextResponse>

  func getState(
    _ request: Beebium_GetStateRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<Beebium_GetStateRequest, Beebium_KeyboardState>
}

extension Beebium_KeyboardServiceClientProtocol {
  internal var serviceName: String {
    return "beebium.KeyboardService"
  }

  /// Press/release by matrix position
  ///
  /// - Parameters:
  ///   - request: Request to send to KeyDown.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func keyDown(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<Beebium_KeyRequest, Beebium_KeyResponse> {
    return self.makeUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.keyDown.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeKeyDownInterceptors() ?? []
    )
  }

  /// Unary call to KeyUp
  ///
  /// - Parameters:
  ///   - request: Request to send to KeyUp.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func keyUp(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<Beebium_KeyRequest, Beebium_KeyResponse> {
    return self.makeUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.keyUp.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeKeyUpInterceptors() ?? []
    )
  }

  /// Type a string (auto press/release with timing)
  ///
  /// - Parameters:
  ///   - request: Request to send to TypeText.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func typeText(
    _ request: Beebium_TypeTextRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<Beebium_TypeTextRequest, Beebium_TypeTextResponse> {
    return self.makeUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.typeText.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeTypeTextInterceptors() ?? []
    )
  }

  /// Query current pressed keys
  ///
  /// - Parameters:
  ///   - request: Request to send to GetState.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func getState(
    _ request: Beebium_GetStateRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<Beebium_GetStateRequest, Beebium_KeyboardState> {
    return self.makeUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.getState.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeGetStateInterceptors() ?? []
    )
  }
}

@available(*, deprecated)
extension Beebium_KeyboardServiceClient: @unchecked Sendable {}

@available(*, deprecated, renamed: "Beebium_KeyboardServiceNIOClient")
internal final class Beebium_KeyboardServiceClient: Beebium_KeyboardServiceClientProtocol {
  private let lock = Lock()
  private var _defaultCallOptions: CallOptions
  private var _interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol?
  internal let channel: GRPCChannel
  internal var defaultCallOptions: CallOptions {
    get { self.lock.withLock { return self._defaultCallOptions } }
    set { self.lock.withLockVoid { self._defaultCallOptions = newValue } }
  }
  internal var interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? {
    get { self.lock.withLock { return self._interceptors } }
    set { self.lock.withLockVoid { self._interceptors = newValue } }
  }

  /// Creates a client for the beebium.KeyboardService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self._defaultCallOptions = defaultCallOptions
    self._interceptors = interceptors
  }
}

internal struct Beebium_KeyboardServiceNIOClient: Beebium_KeyboardServiceClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol?

  /// Creates a client for the beebium.KeyboardService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

/// BBC keyboard matrix input service
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol Beebium_KeyboardServiceAsyncClientProtocol: GRPCClient {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? { get }

  func makeKeyDownCall(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<Beebium_KeyRequest, Beebium_KeyResponse>

  func makeKeyUpCall(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<Beebium_KeyRequest, Beebium_KeyResponse>

  func makeTypeTextCall(
    _ request: Beebium_TypeTextRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<Beebium_TypeTextRequest, Beebium_TypeTextResponse>

  func makeGetStateCall(
    _ request: Beebium_GetStateRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<Beebium_GetStateRequest, Beebium_KeyboardState>
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension Beebium_KeyboardServiceAsyncClientProtocol {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return Beebium_KeyboardServiceClientMetadata.serviceDescriptor
  }

  internal var interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? {
    return nil
  }

  internal func makeKeyDownCall(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<Beebium_KeyRequest, Beebium_KeyResponse> {
    return self.makeAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.keyDown.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeKeyDownInterceptors() ?? []
    )
  }

  internal func makeKeyUpCall(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<Beebium_KeyRequest, Beebium_KeyResponse> {
    return self.makeAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.keyUp.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeKeyUpInterceptors() ?? []
    )
  }

  internal func makeTypeTextCall(
    _ request: Beebium_TypeTextRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<Beebium_TypeTextRequest, Beebium_TypeTextResponse> {
    return self.makeAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.typeText.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeTypeTextInterceptors() ?? []
    )
  }

  internal func makeGetStateCall(
    _ request: Beebium_GetStateRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<Beebium_GetStateRequest, Beebium_KeyboardState> {
    return self.makeAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.getState.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeGetStateInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension Beebium_KeyboardServiceAsyncClientProtocol {
  internal func keyDown(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions? = nil
  ) async throws -> Beebium_KeyResponse {
    return try await self.performAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.keyDown.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeKeyDownInterceptors() ?? []
    )
  }

  internal func keyUp(
    _ request: Beebium_KeyRequest,
    callOptions: CallOptions? = nil
  ) async throws -> Beebium_KeyResponse {
    return try await self.performAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.keyUp.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeKeyUpInterceptors() ?? []
    )
  }

  internal func typeText(
    _ request: Beebium_TypeTextRequest,
    callOptions: CallOptions? = nil
  ) async throws -> Beebium_TypeTextResponse {
    return try await self.performAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.typeText.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeTypeTextInterceptors() ?? []
    )
  }

  internal func getState(
    _ request: Beebium_GetStateRequest,
    callOptions: CallOptions? = nil
  ) async throws -> Beebium_KeyboardState {
    return try await self.performAsyncUnaryCall(
      path: Beebium_KeyboardServiceClientMetadata.Methods.getState.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeGetStateInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal struct Beebium_KeyboardServiceAsyncClient: Beebium_KeyboardServiceAsyncClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol?

  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: Beebium_KeyboardServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

internal protocol Beebium_KeyboardServiceClientInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when invoking 'keyDown'.
  func makeKeyDownInterceptors() -> [ClientInterceptor<Beebium_KeyRequest, Beebium_KeyResponse>]

  /// - Returns: Interceptors to use when invoking 'keyUp'.
  func makeKeyUpInterceptors() -> [ClientInterceptor<Beebium_KeyRequest, Beebium_KeyResponse>]

  /// - Returns: Interceptors to use when invoking 'typeText'.
  func makeTypeTextInterceptors() -> [ClientInterceptor<Beebium_TypeTextRequest, Beebium_TypeTextResponse>]

  /// - Returns: Interceptors to use when invoking 'getState'.
  func makeGetStateInterceptors() -> [ClientInterceptor<Beebium_GetStateRequest, Beebium_KeyboardState>]
}

internal enum Beebium_KeyboardServiceClientMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "KeyboardService",
    fullName: "beebium.KeyboardService",
    methods: [
      Beebium_KeyboardServiceClientMetadata.Methods.keyDown,
      Beebium_KeyboardServiceClientMetadata.Methods.keyUp,
      Beebium_KeyboardServiceClientMetadata.Methods.typeText,
      Beebium_KeyboardServiceClientMetadata.Methods.getState,
    ]
  )

  internal enum Methods {
    internal static let keyDown = GRPCMethodDescriptor(
      name: "KeyDown",
      path: "/beebium.KeyboardService/KeyDown",
      type: GRPCCallType.unary
    )

    internal static let keyUp = GRPCMethodDescriptor(
      name: "KeyUp",
      path: "/beebium.KeyboardService/KeyUp",
      type: GRPCCallType.unary
    )

    internal static let typeText = GRPCMethodDescriptor(
      name: "TypeText",
      path: "/beebium.KeyboardService/TypeText",
      type: GRPCCallType.unary
    )

    internal static let getState = GRPCMethodDescriptor(
      name: "GetState",
      path: "/beebium.KeyboardService/GetState",
      type: GRPCCallType.unary
    )
  }
}

/// BBC keyboard matrix input service
///
/// To build a server, implement a class that conforms to this protocol.
internal protocol Beebium_KeyboardServiceProvider: CallHandlerProvider {
  var interceptors: Beebium_KeyboardServiceServerInterceptorFactoryProtocol? { get }

  /// Press/release by matrix position
  func keyDown(request: Beebium_KeyRequest, context: StatusOnlyCallContext) -> EventLoopFuture<Beebium_KeyResponse>

  func keyUp(request: Beebium_KeyRequest, context: StatusOnlyCallContext) -> EventLoopFuture<Beebium_KeyResponse>

  /// Type a string (auto press/release with timing)
  func typeText(request: Beebium_TypeTextRequest, context: StatusOnlyCallContext) -> EventLoopFuture<Beebium_TypeTextResponse>

  /// Query current pressed keys
  func getState(request: Beebium_GetStateRequest, context: StatusOnlyCallContext) -> EventLoopFuture<Beebium_KeyboardState>
}

extension Beebium_KeyboardServiceProvider {
  internal var serviceName: Substring {
    return Beebium_KeyboardServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  /// Determines, calls and returns the appropriate request handler, depending on the request's method.
  /// Returns nil for methods not handled by this service.
  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "KeyDown":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_KeyRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_KeyResponse>(),
        interceptors: self.interceptors?.makeKeyDownInterceptors() ?? [],
        userFunction: self.keyDown(request:context:)
      )

    case "KeyUp":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_KeyRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_KeyResponse>(),
        interceptors: self.interceptors?.makeKeyUpInterceptors() ?? [],
        userFunction: self.keyUp(request:context:)
      )

    case "TypeText":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_TypeTextRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_TypeTextResponse>(),
        interceptors: self.interceptors?.makeTypeTextInterceptors() ?? [],
        userFunction: self.typeText(request:context:)
      )

    case "GetState":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_GetStateRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_KeyboardState>(),
        interceptors: self.interceptors?.makeGetStateInterceptors() ?? [],
        userFunction: self.getState(request:context:)
      )

    default:
      return nil
    }
  }
}

/// BBC keyboard matrix input service
///
/// To implement a server, implement an object which conforms to this protocol.
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol Beebium_KeyboardServiceAsyncProvider: CallHandlerProvider, Sendable {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: Beebium_KeyboardServiceServerInterceptorFactoryProtocol? { get }

  /// Press/release by matrix position
  func keyDown(
    request: Beebium_KeyRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> Beebium_KeyResponse

  func keyUp(
    request: Beebium_KeyRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> Beebium_KeyResponse

  /// Type a string (auto press/release with timing)
  func typeText(
    request: Beebium_TypeTextRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> Beebium_TypeTextResponse

  /// Query current pressed keys
  func getState(
    request: Beebium_GetStateRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> Beebium_KeyboardState
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension Beebium_KeyboardServiceAsyncProvider {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return Beebium_KeyboardServiceServerMetadata.serviceDescriptor
  }

  internal var serviceName: Substring {
    return Beebium_KeyboardServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  internal var interceptors: Beebium_KeyboardServiceServerInterceptorFactoryProtocol? {
    return nil
  }

  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "KeyDown":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_KeyRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_KeyResponse>(),
        interceptors: self.interceptors?.makeKeyDownInterceptors() ?? [],
        wrapping: { try await self.keyDown(request: $0, context: $1) }
      )

    case "KeyUp":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_KeyRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_KeyResponse>(),
        interceptors: self.interceptors?.makeKeyUpInterceptors() ?? [],
        wrapping: { try await self.keyUp(request: $0, context: $1) }
      )

    case "TypeText":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_TypeTextRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_TypeTextResponse>(),
        interceptors: self.interceptors?.makeTypeTextInterceptors() ?? [],
        wrapping: { try await self.typeText(request: $0, context: $1) }
      )

    case "GetState":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<Beebium_GetStateRequest>(),
        responseSerializer: ProtobufSerializer<Beebium_KeyboardState>(),
        interceptors: self.interceptors?.makeGetStateInterceptors() ?? [],
        wrapping: { try await self.getState(request: $0, context: $1) }
      )

    default:
      return nil
    }
  }
}

internal protocol Beebium_KeyboardServiceServerInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when handling 'keyDown'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeKeyDownInterceptors() -> [ServerInterceptor<Beebium_KeyRequest, Beebium_KeyResponse>]

  /// - Returns: Interceptors to use when handling 'keyUp'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeKeyUpInterceptors() -> [ServerInterceptor<Beebium_KeyRequest, Beebium_KeyResponse>]

  /// - Returns: Interceptors to use when handling 'typeText'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeTypeTextInterceptors() -> [ServerInterceptor<Beebium_TypeTextRequest, Beebium_TypeTextResponse>]

  /// - Returns: Interceptors to use when handling 'getState'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeGetStateInterceptors() -> [ServerInterceptor<Beebium_GetStateRequest, Beebium_KeyboardState>]
}

internal enum Beebium_KeyboardServiceServerMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "KeyboardService",
    fullName: "beebium.KeyboardService",
    methods: [
      Beebium_KeyboardServiceServerMetadata.Methods.keyDown,
      Beebium_KeyboardServiceServerMetadata.Methods.keyUp,
      Beebium_KeyboardServiceServerMetadata.Methods.typeText,
      Beebium_KeyboardServiceServerMetadata.Methods.getState,
    ]
  )

  internal enum Methods {
    internal static let keyDown = GRPCMethodDescriptor(
      name: "KeyDown",
      path: "/beebium.KeyboardService/KeyDown",
      type: GRPCCallType.unary
    )

    internal static let keyUp = GRPCMethodDescriptor(
      name: "KeyUp",
      path: "/beebium.KeyboardService/KeyUp",
      type: GRPCCallType.unary
    )

    internal static let typeText = GRPCMethodDescriptor(
      name: "TypeText",
      path: "/beebium.KeyboardService/TypeText",
      type: GRPCCallType.unary
    )

    internal static let getState = GRPCMethodDescriptor(
      name: "GetState",
      path: "/beebium.KeyboardService/GetState",
      type: GRPCCallType.unary
    )
  }
}
